# Dark Language Support

[![Visual Studio Marketplace Version](https://vsp210.gallerycdn.vsassets.io/extensions/vsp210/dark-lang/0.3.6/1754914792639/Microsoft.VisualStudio.Services.Icons.Default)](https://marketplace.visualstudio.com/items?itemName=vsp210.dark-lang)

Полная поддержка языка программирования **Dark** для [Visual Studio Code](https://code.visualstudio.com/).

**[Установить из VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=vsp210.dark-lang)** | **[Документация языка Dark](https://vsp210.ru/dark-lang/)**

Это расширение превращает ваш редактор в мощную среду для разработки на языке Dark, предоставляя подсветку синтаксиса, запуск кода, интеллектуальное автодополнение, проверку ошибок и многое другое.

## Возможности

*   **Подсветка синтаксиса:** Красивая и читаемая раскраска кода для файлов `.dark`.
*   **Запуск кода:** Запускайте ваши скрипты прямо из редактора одним кликом по иконке ▶ в заголовке окна.
*   **Умное автодополнение (IntelliSense):** Получайте контекстные подсказки для:
    *   Ключевых слов (`if`, `while`, `function` и т.д.).
    *   Встроенных и пользовательских функций.
    *   Переменных, с полным учетом их **области видимости** (глобальные, локальные, параметры функции).
    *   **Модулей стандартной библиотеки** (`os`, `math` и др.) после их импорта.
    *   **Встроенных методов** для строк, списков и словарей (`.len()`, `.append()`, `.keys()`).
*   **Контекстный импорт:** Автоматические подсказки для всех доступных модулей при написании `import "..."`.
*   **Семантическая подсветка:** Имена импортированных модулей выделяются цветом, что улучшает читаемость кода.
*   **Проверка синтаксиса (Линтер):** Мгновенное обнаружение и подсветка синтаксических ошибок прямо в редакторе.
*   **Информация при наведении:** Наведите курсор на функцию или переменную, чтобы увидеть ее документацию и параметры.
*   **Поддержка Docstrings:** Пишите документацию к вашим функциям в виде комментариев (`#`) или строковых литералов, и она будет автоматически отображаться в подсказках.
*   **Поддержка виртуальных окружений (`denv`) и пакетного менеджера (`dpm`).**

## Начало работы

### 1. Установка Dark

Для работы расширения требуется установленный интерпретатор языка Dark v0.3.6 или выше.

**Скачать установщик Dark v0.3.6**

### 2. Настройка проекта

1.  Откройте папку вашего проекта в VS Code.
2.  Откройте терминал (Ctrl + \`) и создайте виртуальное окружение `denv`:
Linux / macOS:
```bash
dark --denv venv
```
Windows:
```bash
dark_start.exe --denv venv
```
3.  **Выберите окружение в VS Code.** В правом нижнем углу строки состояния появится кнопка `Dark: Выбрать окружение`. Нажмите на нее и выберите созданное вами окружение (`venv`).
4.  Теперь вы можете устанавливать пакеты с помощью `dpm` прямо в терминале VS Code (убедитесь, что окружение активировано):
```bash
# Активация (пример для git bash)
source venv/bin/activate

# Установка пакета
dark --dpm install <имя_пакета>
```
5.  Запуск кода (кнопка ▶) и проверка ошибок теперь будут автоматически использовать выбранное окружение.

## Настройки расширения

Это расширение добавляет следующие настройки в VS Code:

*   `dark.executorPath`: Абсолютный путь к **глобальному** исполняемому файлу интерпретатора Dark (`dark_start.exe`). Этот путь будет использоваться, если в проекте не выбрано виртуальное окружение `denv`.

**Пример настройки в `settings.json`:**
```json
{
    "dark.executorPath": "C:\\Program Files (x86)\\Dark-Lang-0-3-7\\dark_start.exe"
}
```

## История версий

### 0.3.6
*   **Интеграция с `denv`:** Добавлена полная поддержка виртуальных окружений.
    *   Новый индикатор в строке состояния для выбора активного `denv`.
    *   Автоматический поиск окружений в рабочей области.
    *   Запуск кода и проверка ошибок теперь выполняются в контексте выбранного `denv`.
*   **Обновление в соответствии с Dark Language v0.3.6:**
    *   Добавлена поддержка пакетного менеджера `dpm` (`install`, `uninstall`, `list`, `freeze`).
    *   Расширения теперь могут быть полноценными пакетами (папками).
    *   Добавлены новые функции в стандартную библиотеку (`http.post`, `gui.stop` и др.).
    *   Обновлена документация и подсказки для всех новых возможностей.

### 0.3.5
*   **Обновление в соответствии с Dark Language v0.3.5:**
    *   Добавлена поддержка конструкции `from "<file>" use <name1>, <name2>...` для импорта конкретных функций и переменных из других файлов.
    *   Импортированные таким образом имена теперь корректно распознаются анализатором, подсвечиваются и доступны в автодополнении.
    *   Исправлены мелкие ошибки и улучшена стабильность.

### 0.3.2
*   **Исправление подсветки синтаксиса:** Устранена критическая ошибка, из-за которой семантический анализатор некорректно подсвечивал переменные внутри комментариев и строковых литералов (включая многострочные). Теперь подсветка работает точно и предсказуемо.

*   **Обновление в соответствии с Dark Language v0.3.1:**
    *   Добавлена поддержка нового модуля `color` для вывода цветного текста.
    *   Добавлена поддержка модуля `python` и директивы `#!USE_WITH_PYTHON` для интеграции с Python.
    *   Добавлена функция `http.post`.
*   **Улучшения:** Обновлены подсказки и автодополнение для всех новых функций.
*   **Поддержка Linux:** Расширение теперь корректно работает в Linux-системах.
*   **Major Feature: Полная поддержка модулей!**
    *   Добавлено автодополнение и всплывающие подсказки для всей стандартной библиотеки (`os`, `math`, `http`, `stdlib`, `time`, `vsp210`).
    *   Реализованы контекстные подсказки для модулей внутри `import "..."`.
    *   Добавлена поддержка **Python-расширений** (подробности в основной документации языка).
*   **Major Feature: Встроенные методы!**
    *   Реализовано автодополнение для методов встроенных типов (`string`, `list`, `dict`), например: `my_list.append()` или `"hello".upper()`.
*   **Улучшенная подсветка:** Добавлена семантическая подсветка для импортированных модулей, чтобы их было легче отличать от переменных.
*   **Исправления и улучшения:** Множество улучшений в работе анализатора кода, повышение стабильности и исправление мелких ошибок.

### 0.1.x
*   Первоначальный выпуск "Dark Language Support".
*   **Основные функции:**
* Подсветка синтаксиса
* Запуск файлов `.dark`
* Автодополнение для ключевых слов, функций и переменных
* Проверка синтаксиса
* Подсказки при наведении
